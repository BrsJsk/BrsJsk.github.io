{
    "componentChunkName": "component---src-templates-blog-post-js",
    "path": "/webpack-lazy-loading/",
    "result": {"data":{"site":{"siteMetadata":{"title":"A Frontend Engineer's blog"}},"markdownRemark":{"id":"63ecba1a-6468-5f3f-b8fa-853efa47b9eb","excerpt":"Webpack is a great tool and it’s really great to know at least basics of it. If we are working with Angular CLI, or Create React App, we already have webpack…","html":"<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/33d3d48e9fa4f9638d98832e8b5f8928/5a190/webpack.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 50%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAYAAAC0VX7mAAAACXBIWXMAAAsTAAALEwEAmpwYAAABaUlEQVQoz51STUsCURSdX9HMm8nxfWlUVAvzh5TSQmiRJZGLsCYpBqWaQDIzi7BFEIG7fkD7Vq2CKIgW/QfX7k7MG8fGooUuDu/dy7vn3XPv0Tjn8MEYU4jG4X0UaEExB2cMQkpQxiGEHIk0+k4LAgbGOYiuQ1IbFtFh2zaklBBCKFBKB/doLkron1rITOM2MrlV3Dw+o1y7wOzMNHRdh2EYIIQgkUjAJASmaQ5yyWTyD6kijMViSKVSePjoYqXzhavXHvZPTpHPr8Epl1FvNHDeauHAdbFdKsGtVLBVLOKs2cRyNgtiGKrjIcJ0ehGd9y6W7j7ReOlh77iGQmEDbrWKQ8/DjuPgut3GkeehVq9j13HUZ8uZjOp6iFC1TOPIrW/i/ukN1ctbLMzPKcmkL9OyLCXbl+hL9pvw4c96SPLPQDkMfQJTgmHSDAqiS1FzplQVhvHvLQ+WEiYC2zDwPslYtvnPyOMa+xup/z0jlQs82gAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"webpack\"\n        title=\"webpack\"\n        src=\"/static/33d3d48e9fa4f9638d98832e8b5f8928/f058b/webpack.png\"\n        srcset=\"/static/33d3d48e9fa4f9638d98832e8b5f8928/c26ae/webpack.png 158w,\n/static/33d3d48e9fa4f9638d98832e8b5f8928/6bdcf/webpack.png 315w,\n/static/33d3d48e9fa4f9638d98832e8b5f8928/f058b/webpack.png 630w,\n/static/33d3d48e9fa4f9638d98832e8b5f8928/5a190/webpack.png 800w\"\n        sizes=\"(max-width: 630px) 100vw, 630px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p>Webpack is a great tool and it’s really great to know at least basics of it. If we are working with Angular CLI, or Create React App, we already have webpack setup there, but if we are working on a web application that’s not using a Javascript Framework, we should probably user a bundler. Sure, we could go with no-setup-needed Parcel but if we want more control, go with Webpack. My personal web site is all Javascript, only one HTML file and no framework. I’me using webpack as a bundler and lazy loading to improve performance and I’m really happy with it!</p>\n<p>To get started, run npm init -y and create the following structure:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">src /\n--- notLazyLoaded.js\n--- lazyLoaded.js\nindex.html\nmain.js\nwebpack.config.js</code></pre></div>\n<p>Run the following command to install webpack:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">npm install webpack webpack-cli html-webpack-plugin webpack-dev-server --save-dev</code></pre></div>\n<p>We’ve installed webpack, webpack plugin for adding our index.html into the bundle and dev server.</p>\n<p>Let’s add some code to our webpack config</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">const path = require(\"path\");\nconst HtmlWebpackPlugin = require(\"html-webpack-plugin\");\n\nmodule.exports = {\n  entry: \"./main.js\",\n  output: {\n    filename: \"[name].[hash].bundle.js\",\n    path: path.resolve(__dirname, \"dist\")\n  },\n  devtool: \"inline-source-map\",\n  devServer: {\n    contentBase: \"./dist\",\n    port: 9000\n  },\n  plugins: [\n    new HtmlWebpackPlugin({\n      template: \"./index.html\"\n    })\n  ]\n};\n</code></pre></div>\n<p>Inside our package.json, add a script to bundle and run.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\"> \"webpack\": \"webpack-dev-server --open\"</code></pre></div>\n<p>Pretty basic but it will bundle our application and open our web application on port 9000.</p>\n<p>Inside the HTML file, I’ve added 2 buttons, one will call notLazyLoaded.js and the other one will lazyLoaded.js</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">&lt;body>\n    &lt;button id=\"alert\">Alert&lt;/button>\n    &lt;button id=\"lazyAlert\">Lazy Alert&lt;/button>\n  &lt;/body></code></pre></div>\n<p>lazyLoaded.js and notLazyLoaded.js have basically same code.</p>\n<h1>lazyLoaded.js</h1>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">const showLazyAlert = () => {\n  alert(\"Hello from lazyLoaded.js\");\n};\n\nexport { showLazyAlert };\n</code></pre></div>\n<h1>notLazyLoaded.js</h1>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">const showAlert = () => {\n  alert(\"Hello from notLazyLoaded.js\");\n};\n\nexport { showAlert };\n</code></pre></div>\n<p>In our main.js, we will add code to show an alert depending of the button clicked.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">import { showAlert } from \"./src/notLazyLoaded\";\n\nwindow.onload = () => {\n  const alertBtn = document.querySelector(\"#alert\");\n  const lazyAlertBtn = document.querySelector(\"#lazyAlert\");\n\n  alertBtn.addEventListener(\"click\", () => {\n      showAlert();\n  });\n};\n</code></pre></div>\n<p>Currently, if we open the app, we see in the network tab that only main.js is loaded on initial load, we click the ‘Alert’ button and an alert shows up which is already loaded in the bundle. Now comes the main part, making changes so when user clicks on ‘Lazy Alert’ button, lazyLoaded.js module loads and executes.</p>\n<p>Inside main.js, add following code</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">lazyAlertBtn.addEventListener(\"click\", () => {\n    import(/* webpackChunkName: \"lazyLoaded\" */ './src/lazyLoaded').then(module => {\n        module.showLazyAlert();\n    });</code></pre></div>\n<p>Save and open the app. On initial load, we only have the main.js bundle loaded, when we click the Lazy Alert button, lazyLoaded.js bundle loads and executes code. That’s it. It will load only when it needs to load and will improve initial load time and overall performance of the app.</p>\n<p>Source code is hosted on Github.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">git clone https://github.com/BrsJsk/webpack-lazy-loading\ncd webpack-lazy-loading\nnpm i\nnpm run webpack</code></pre></div>","frontmatter":{"title":"Lazy loading modules with Webpack","date":"January 08, 2019","description":null}},"previous":null,"next":{"fields":{"slug":"/angular-custom-elements/"},"frontmatter":{"title":"Angular custom elements - introduction"}}},"pageContext":{"id":"63ecba1a-6468-5f3f-b8fa-853efa47b9eb","previousPostId":null,"nextPostId":"1f5282f9-84c2-524c-8e21-1708eced0fa4"}},
    "staticQueryHashes": ["2785349746","2841359383"]}