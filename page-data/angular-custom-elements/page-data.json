{
    "componentChunkName": "component---src-templates-blog-post-js",
    "path": "/angular-custom-elements/",
    "result": {"data":{"site":{"siteMetadata":{"title":"A Frontend Engineer's blog"}},"markdownRemark":{"id":"1f5282f9-84c2-524c-8e21-1708eced0fa4","excerpt":"In a land of framework wars, one thing that could help us are web components. Creating components and being able to use them in any javascript framework wouldâ€¦","html":"<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 186px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/2327c93a46521e5f7a0e2a9aa847c4d7/679d2/angular_thumbnail.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 107.59493670886076%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAWCAYAAADAQbwGAAAACXBIWXMAAAsSAAALEgHS3X78AAAEIUlEQVQ4y12VWWxUVRjHT6lRn00wMfKALXW2YpcYLKiV9t6pBIy88CCKcUnsgyERAjO9c4cZbMvSuaMgLtQFEIUiIptoeFCqhmCrliU+GKMkGo1GxMSFBBM6d76fOefcacGTnNxJZuZ3/9//25RbQrkBM9yAejdAOYEo8ywx0ymxIl1mtK0of8X62J3ySbcWuCHuoZI5FIhK5KhP+sxozqPm5kUp1wCmIDe6JRY7JXnbDbjolCAdQFsRYh4kcuZ+n8gRJH3mqUfRQJXyUY0ZqUv51CsnMArnuwFb3YAfNMQNpm6lp0zYVhSJeVQSOaoaGp+Gn0nk8FM+icaMBWt1Z51pAE5JQg3qGpLqws2IU0JaCkhTFg2VuGeglbj9HIFFv2y0OU+vikBVDXFK+inSNQQPbEWWbkMefAHm9cMd66C1iDTnDViDNDCMe1KJe1LV8KTP/ggooQ61p4zcvQFZuQd+/wd+/RP2jsG2j+Clj+HlE7D5Q2gpQKxPREMj8GRkwWM1YKUW8sLNcO4nzDl/AXadhJEx2DMGI+NwaAJ634Tb1hpFxD2p2UAyxxJlfWNSq+sYsAr0+fsyPLEDlm6zL7rzWXhoGPaNw86TsGADNGUNpOZlmPRpr3kYdg0hS7bYMPV5/TML0WUzdx00ZuwtHoajZ6DvADRkDLAahXupOc8tKvKOuwZE3jplYT/+AYueg+7ou/aizeacrLVk9ymrVP+mIUM1aYE/txS4XqUDudy5CVa8hvx7xQL7j4IOX8OmCrsPUr717pkROHza2KMzHkYKx29eaTvlglayeAvV736zwHe+gPmD/wNOFzODx+DQaVg1gszJmILXtXiwKYvSIX+t/9gxQJh91wJF4KldcM9GWPQ8tK+fVrd8GA5OwPAn1oqmrEQlIy/GPNMpHNeJSZcl1DX46bcWOnYeFgxazzRs1mpoLcAro/DeBDzyKsxeI5L0awrJ6r7WwB1mCJSp3LsRHn8DrlQsdPuoCYvV+2ztrT8CB76C4PhUp+jCDm0NysMG6AT0Rz08abON7B1DNLASwvtn4cgZOHbOJmL/l8ZvaViLVidxTyzQ575kpPDpWi3aoWB6WHeI7Pkc0aq0n0/uNCpl+fB0LydyTNYGRMqnMWmnDTPdgN1Rxxhwd0lCXTYdA0jnJuOTzF6D6KQ0ZAyoctUYu5TM4XUPoTo3WWDtdrgBJ2rzsKdsZmH1/rLJskTTJLyqMzR4uDnPrdq7jgE9sTWwRJ0zNf4NeJkb8E1NcTqg0lakGuubyqa+H6R82uKemKGayEl9ayECOtMgvVfqolVwnROwyinJxXT5msKeSPos0gWs/Yp7ovdJXcwTNXstqjl/bci1W+/YxaUWDnFTT5nt7UV+ub1PelXaLqemLDP0Ypq1SpRaJgbeUhClz38sDnXL0+6D6QAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"logo\"\n        title=\"logo\"\n        src=\"/static/2327c93a46521e5f7a0e2a9aa847c4d7/679d2/angular_thumbnail.png\"\n        srcset=\"/static/2327c93a46521e5f7a0e2a9aa847c4d7/c26ae/angular_thumbnail.png 158w,\n/static/2327c93a46521e5f7a0e2a9aa847c4d7/679d2/angular_thumbnail.png 186w\"\n        sizes=\"(max-width: 186px) 100vw, 186px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p>In a land of framework wars, one thing that could help us are web components. Creating components and being able to use them in any javascript framework would be nice..in this series we will explore creating web components using Angular, publishing them and using them in plan javascript, React etc.</p>\n<p>Lets start by creating a new application</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">ng new br-date</code></pre></div>\n<p>Add @angular/elements package</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">ng add @angular/elements</code></pre></div>\n<p>Generate new component (I created br-date but you can use whatever you want)</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">ng generate component br-date</code></pre></div>\n<p>We need to update entryComponents inside app.module.ts to include our newly created component and also define a custom element.</p>\n<p>App module will look like this:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">import { BrowserModule } from \"@angular/platform-browser\";\nimport { NgModule, Injector } from \"@angular/core\";\n\nimport { AppComponent } from \"./app.component\";\nimport { BrDateComponent } from \"./components/br-date/br-date.component\";\n\nimport { createCustomElement } from \"@angular/elements\";\n@NgModule({\n declarations: [AppComponent, BrDateComponent],\n imports: [BrowserModule],\n providers: [],\n entryComponents: [BrDateComponent]\n})\nexport class AppModule {\n constructor(private injector: Injector) {}\n\n ngDoBootstrap() {\n   const element = createCustomElement(BrDateComponent, {\n     injector: this.injector\n   });\n\n   customElements.define('br-date', element);\n }\n}\n</code></pre></div>\n<p>Inside ngDoBootstrap function, we are creating a custom element using createCustomElement method from @angular/elements and defining br-date component.</p>\n<p>We also need to update our angular.json. Inside projects->br-date->architect->build->scripts object we need to add:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">{\n   \"input\": \"node_modules/document-register-element/build/document-register-element.js\"\n}\n</code></pre></div>\n<p>By default, angular will hash outputs inside dist directory, which is not really useful when building a web component we plan to publish.</p>\n<p>Lets create custombuild.sh file with following content:\nIt will build application without hashing and concat source files inside index.js file.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">#!/bin/sh\nng build br-date --prod --output-hashing=none &amp;&amp; cat dist/br-date/runtime-es5.js dist/br-date/polyfills-es5.js dist/br-date/scripts.js dist/br-date/main-es5.js > dist/br-date/index.js</code></pre></div>\n<p>Now we can test this.\nFastest way, in my opinion to test this, is to create a example folder with index.html and index.js.</p>\n<p>index.html will have following content</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">&lt;!DOCTYPE html>\n&lt;html lang=\"en\">\n&lt;head>\n   &lt;meta charset=\"UTF-8\">\n   &lt;meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n   &lt;title>Document&lt;/title>\n&lt;/head>\n&lt;body>\n   &lt;br-date>&lt;/br-date>\n   &lt;script src=\"./index.js\">&lt;/script>\n&lt;/body>\n&lt;/html></code></pre></div>\n<p>and inside index.js we will just import our built component.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">import '../dist/br-date/index';</code></pre></div>\n<p>We can run example app using Parcel or whatever you like.\nInside the example directory, run parcel index.html\nYou can get more info if you are interested at : <a href=\"https://parceljs.org/\">https://parceljs.org/</a></p>\n<p>When you open your app in browser, you should see something like this:\n<img src=\"https://dev-to-uploads.s3.amazonaws.com/i/3ig3spse7cxbcvlpnmmx.png\" alt=\"End REsult\"></p>\n<p>If you encounter some problems, you can leave a comment here.\nSource code is hosted at: <a href=\"https://github.com/BrsJsk/br-date\">https://github.com/BrsJsk/br-date</a></p>","frontmatter":{"title":"Angular custom elements - introduction","date":"March 16, 2020","description":null}},"previous":{"fields":{"slug":"/webpack-lazy-loading/"},"frontmatter":{"title":"Lazy loading modules with Webpack"}},"next":{"fields":{"slug":"/kids-with-the-greatest-number-of-candies/"},"frontmatter":{"title":"#2 - Leetcode"}}},"pageContext":{"id":"1f5282f9-84c2-524c-8e21-1708eced0fa4","previousPostId":"63ecba1a-6468-5f3f-b8fa-853efa47b9eb","nextPostId":"b9204fdd-a13e-5c76-b433-4dcbb9556990"}},
    "staticQueryHashes": ["2785349746","2841359383"]}